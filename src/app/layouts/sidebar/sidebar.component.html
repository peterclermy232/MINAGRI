<aside id="sidebar" class="sidebar">
  <ul class="sidebar-nav" id="sidebar-nav">
    <!-- Loop through filtered menu items -->
    <ng-container *ngFor="let item of menuItems">
      <!-- Parent menu item WITHOUT children (direct link) -->
      <li class="nav-item" *ngIf="!hasChildren(item)">
        <a
          class="nav-link"
          [routerLink]="item.route"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: true}">
          <i [class]="'bi ' + item.icon"></i>
          <span>{{ item.label }}</span>
        </a>
      </li>

      <!-- Parent menu item WITH children (collapsible) -->
      <li class="nav-item" *ngIf="hasChildren(item)">
        <a
          class="nav-link collapsed"
          [attr.data-bs-target]="'#' + getMenuId(item.label)"
          data-bs-toggle="collapse"
          href="javascript:void(0)">
          <i [class]="'bi ' + item.icon"></i>
          <span>{{ item.label }}</span>
          <i class="bi bi-chevron-down ms-auto"></i>
        </a>

        <!-- Child menu items -->
        <ul
          [id]="getMenuId(item.label)"
          class="nav-content collapse"
          data-bs-parent="#sidebar-nav">
          <li *ngFor="let child of item.children">
            <a
              [routerLink]="child.route"
              routerLinkActive="active">
              <i class="bi bi-circle"></i>
              <span>{{ child.label }}</span>
            </a>
          </li>
        </ul>
      </li>
    </ng-container>

    <!-- User Role Badge (Optional - shows current role) -->
    <li class="nav-item mt-3" *ngIf="userRole">
      <div class="nav-link disabled text-center">
        <small class="text-muted">
          Role: <span class="badge bg-primary">{{ userRole }}</span>
        </small>
      </div>
    </li>
  </ul>
</aside>
